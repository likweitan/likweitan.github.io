<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="noindex, nofollow"><title>Apache Hadoop | likweitan</title>
<meta name=keywords content><meta name=description content="Prerequisites


Apache Hadoop
Apache Pig is a platform build on the top of Hadoop. You can refer to our previously published article to install a Hadoop single node cluster on Windows 10.


7zip/Winrar
7zip/Winrar is needed to extract .tar.gz archives we will be downloading in this guide.


Downloading Apache Pig
Download the Apache Pig
After the file is downloaded, we should extract it twice using 7zip (using 7zip: the first time we extract the .tar.gz file, the second time we extract the .tar file). We will extract the Pig folder into C:\hadoop-env directory as used in the previous articles. Or you could use winzip to extract it."><meta name=author content><link rel=canonical href=http://localhost:1313/posts/my-first-post/><link crossorigin=anonymous href=/assets/css/stylesheet.54405a410796490bc874ab6181fac9b675753cc2b91375d8f882566459eca428.css integrity="sha256-VEBaQQeWSQvIdKthgfrJtnV1PMK5E3XY+IJWZFnspCg=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:1313/apple-touch-icon.png><link rel=mask-icon href=http://localhost:1313/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/posts/my-first-post/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript></head><body id=top><script>window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="likweitan (Alt + H)">likweitan</a><div class=logo-switches></div></div><ul id=menu><li><a href=http://localhost:1313/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://likweitan.eu.org title=likweitan.eu.org><span>likweitan.eu.org</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Apache Hadoop</h1><div class=post-meta><span title='2024-10-20 17:42:50 +0800 +08'>October 20, 2024</span>&nbsp;·&nbsp;4 min</div></header><div class=post-content><h1 id=prerequisites>Prerequisites<a hidden class=anchor aria-hidden=true href=#prerequisites>#</a></h1><ol><li><p><a href=https://hadoop.apache.org/>Apache Hadoop</a>
Apache Pig is a platform build on the top of Hadoop. You can refer to our previously published article to install a Hadoop single node cluster on Windows 10.</p></li><li><p><a href=https://www.7-zip.org/>7zip</a>/<a href=https://www.win-rar.com/>Winrar</a>
7zip/Winrar is needed to extract .tar.gz archives we will be downloading in this guide.</p></li></ol><h1 id=downloading-apache-pig>Downloading Apache Pig<a hidden class=anchor aria-hidden=true href=#downloading-apache-pig>#</a></h1><p>Download the <a href=https://downloads.apache.org/pig/>Apache Pig</a></p><p>After the file is downloaded, we should extract it twice using <strong>7zip</strong> (using 7zip: the first time we extract the .tar.gz file, the second time we extract the .tar file). We will extract the Pig folder into <code>C:\hadoop-env</code> directory as used in the previous articles. Or you could use <strong>winzip</strong> to extract it.</p><h1 id=setting-environment-variables>Setting Environment Variables<a hidden class=anchor aria-hidden=true href=#setting-environment-variables>#</a></h1><p>After extracting Derby and Hive archives, we should go to Control Panel > System and Security > System. Then Click on <strong>Advanced system settings</strong>.</p><p>In the advanced system settings dialog, click on <strong>Environment variables</strong> button.</p><p>Now we should add the following user variables:</p><ul><li>PIG_HOME: <code>C:\hadoop-env\pig-0.17.0</code></li></ul><p><img loading=lazy src=https://miro.medium.com/max/653/1*B3DoL0H1WYff1-fWUBK8MA.png alt=a></p><blockquote><p><code>hadoop-env</code> is the folder name of your hadoop.</p></blockquote><p>Now, we should edit the Path user variable to add the following paths:</p><ul><li>%PIG_HOME%\bin</li></ul><p><img loading=lazy src=https://miro.medium.com/max/527/1*ZoXoknTO6tMP9A0CNyywbA.png alt=a></p><h1 id=edit-pigcmd-file>Edit pig.cmd file<a hidden class=anchor aria-hidden=true href=#edit-pigcmd-file>#</a></h1><p>Edit file D:/Pig/pig-0.17.0/bin/pig.cmd, make below changes and save this file.</p><ul><li>set HADOOP_BIN_PATH=%HADOOP_HOME%\libexec</li></ul><p><img loading=lazy src=https://i.ibb.co/hLpZ1w4/image.png alt=a></p><h1 id=validate-pig-installation-pig>Validate Pig Installation Pig<a hidden class=anchor aria-hidden=true href=#validate-pig-installation-pig>#</a></h1><p>Post successful execution of Hadoop and verify the installation.</p><pre tabindex=0><code>C:\WINDOWS\system32&gt;pig -version
Apache Pig version 0.17.0 (r1797386)
compiled Jun 02 2017, 15:41:58
</code></pre><blockquote><p>If you have encountered any problems, please read through the Troubleshooting section.</p></blockquote><h1 id=example-script>Example Script<a hidden class=anchor aria-hidden=true href=#example-script>#</a></h1><h2 id=start-the-hadoop>Start the hadoop<a hidden class=anchor aria-hidden=true href=#start-the-hadoop>#</a></h2><p>Browse through the sbin directory of Hadoop and start yarn and Hadoop dfs (distributed file system) as shown below.</p><pre tabindex=0><code>C:\WINDOWS\system32&gt;cd %HADOOP_HOME%/sbin/
C:\WINDOWS\system32&gt;start-all.cmd
</code></pre><blockquote><p>Remember to run as administrator when executing CMD.</p></blockquote><h2 id=create-a-directory-in-hdfs>Create a Directory in HDFS<a hidden class=anchor aria-hidden=true href=#create-a-directory-in-hdfs>#</a></h2><p>In Hadoop DFS, you can create directories using the command mkdir. Create a new directory in HDFS with the name Pig_Data in the required path as shown below.</p><pre tabindex=0><code>C:\WINDOWS\system32&gt;cd %HADOOP_HOME%/bin/
C:\WINDOWS\system32&gt;hdfs dfs -mkdir hdfs://localhost:9000/pig_data
</code></pre><h2 id=create-a-text-file-wikitechy_emp_detailstxt-delimited-by--with-the-content-below-place-the-file-in-c-or-any-directory-which-you-preferred>Create a text file <code>wikitechy_emp_details.txt</code> delimited by ‘,’ with the content below. Place the file in C: or any directory which you preferred.<a hidden class=anchor aria-hidden=true href=#create-a-text-file-wikitechy_emp_detailstxt-delimited-by--with-the-content-below-place-the-file-in-c-or-any-directory-which-you-preferred>#</a></h2><pre tabindex=0><code>111,Anu,Shankar,23,9876543210,Chennai
112,Barvathi,Nambiayar,24,9876543211,Chennai
113,Kajal,Nayak,24,9876543212,Trivendram
114,Preethi,Antony,21,9876543213,Pune
115,Raj,Gopal,21,9876543214,Hyderabad
116,Yashika,Kannan,22,9876543215,Delhi
117,siddu,Narayanan,22,9876543216,Kolkata
118,Timple,Mohanthy,23,9876543217,Bhuwaneshwar
</code></pre><h2 id=move-the-file-to-hdfs>Move the file to HDFS<a hidden class=anchor aria-hidden=true href=#move-the-file-to-hdfs>#</a></h2><p>Now, move the file from the local file system to HDFS using put command as shown below. (You can use copyFromLocal command as well.)</p><pre tabindex=0><code>C:\WINDOWS\system32&gt;cd %HADOOP_HOME%/bin/
C:\WINDOWS\system32&gt;hdfs dfs -put C:\wikitechy_emp_details.txt hdfs://localhost:9000/pig_data/
</code></pre><h2 id=start-the-pig-grunt-shell>Start the Pig Grunt Shell<a hidden class=anchor aria-hidden=true href=#start-the-pig-grunt-shell>#</a></h2><p>The simplest way to write PigLatin statements is using Grunt shell which is an interactive tool where we write a statement and get the desired output. There are two modes to involve Grunt Shell:</p><ol><li><strong>Local</strong>: All scripts are executed on a single machine without requiring Hadoop. (command: <code>pig -x local</code>)</li><li><strong>MapReduce</strong>: Scripts are executed on a Hadoop cluster (command: <code>pig -x MapReduce</code>)</li></ol><p>Since we have load the <code>wikitechy_emp_details.txt</code> in hdfs, start the Pig Grunt shell in MapReduce mode as shown below.</p><pre tabindex=0><code>C:\WINDOWS\system32&gt;pig -x mapreduce
</code></pre><h2 id=load-the-file-in-a-variable-student>Load the file in a variable &lsquo;student&rsquo;<a hidden class=anchor aria-hidden=true href=#load-the-file-in-a-variable-student>#</a></h2><p>Now load the data from the file student_data.txt into Pig by executing the following Pig Latin statement in the Grunt shell.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>grunt&gt; student <span style=color:#f92672>=</span> LOAD <span style=color:#e6db74>&#39;hdfs://localhost:9000/pig_data/wikitechy_emp_details.txt&#39;</span>
</span></span><span style=display:flex><span>   USING PigStorage<span style=color:#f92672>(</span><span style=color:#e6db74>&#39;,&#39;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   as <span style=color:#f92672>(</span> id:int, firstname:chararray, lastname:chararray, phone:chararray,
</span></span><span style=display:flex><span>   city:chararray <span style=color:#f92672>)</span>;
</span></span></code></pre></div><h2 id=check-result-using-dump-operator-write-result-to-the-console>Check result using DUMP operator (write result to the console)<a hidden class=anchor aria-hidden=true href=#check-result-using-dump-operator-write-result-to-the-console>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>grunt&gt; Dump student
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>111,Anu,Shankar,23,9876543210<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>112,Barvathi,Nambiayar,24,9876543211<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>113,Kajal,Nayak,24,9876543212<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>114,Preethi,Antony,21,9876543213<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>115,Raj,Gopal,21,9876543214<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>116,Yashika,Kannan,22,9876543215<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>117,siddu,Narayanan,22,9876543216<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>118,Timple,Mohanthy,23,9876543217<span style=color:#f92672>)</span>
</span></span></code></pre></div><p><img loading=lazy src=https://i.ibb.co/wrxbbDs/image.png alt=a></p><blockquote><p>If you have encountered any problems, please read through the Troubleshooting section.</p></blockquote><h1 id=troubleshooting-故障排除>Troubleshooting 故障排除<a hidden class=anchor aria-hidden=true href=#troubleshooting-故障排除>#</a></h1><h2 id=pig-is-not-recognized-as-an-internal-or-external-command>Pig is not recognized as an internal or external command<a hidden class=anchor aria-hidden=true href=#pig-is-not-recognized-as-an-internal-or-external-command>#</a></h2><pre tabindex=0><code>C:\WINDOWS\system32&gt;pig -version
&#39;E:\hadoop-env\hadoop-3.2.1\bin\hadoop-config.cmd&#39; is not recognized as an internal or external command,
operable program or batch file.
&#39;-Xmx1000M&#39; is not recognized as an internal or external command,
operable program or batch file.
</code></pre><p><img loading=lazy src=https://miro.medium.com/max/700/1*zFUaMDFADy06wQqOUGydYw.png alt=a></p><p>Make sure your is correct</p><p>From this:</p><pre tabindex=0><code>set HADOOP_BIN_PATH=%HADOOP_HOME%\bin
</code></pre><p>Change to:</p><pre tabindex=0><code>set HADOOP_BIN_PATH=%HADOOP_HOME%\libexec
</code></pre><p><img loading=lazy src=https://i.ibb.co/hLpZ1w4/image.png alt=a></p><h2 id=after-dump-command-the-process-keep-looping>After <code>Dump</code> command, the process keep looping<a hidden class=anchor aria-hidden=true href=#after-dump-command-the-process-keep-looping>#</a></h2><blockquote><p>Pig when ran in mapreduce mode expects the JobHistoryServer to be available.</p></blockquote><p>This is because the job history server is not running.</p><p>Check <code>marped-site.xml</code> has these properties stated or not.</p><p>To configure JobHistoryServer, <strong>add</strong> these properties to <code>mapred-site.xml</code> replacing hostname with actual name of the host where the process is started.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;name&gt;</span>mapreduce.jobhistory.address<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;value&gt;</span>hostname:10020<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;name&gt;</span>mapreduce.jobhistory.webapp.address<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;value&gt;</span>hostname:19888<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span></code></pre></div><p>The result would be like this:</p><p><img loading=lazy src=https://i.ibb.co/ydyG8zg/image.png alt=a></p><h1 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h1><ol><li><p><a href=https://www.solutionmandi.com/2018/11/pig-installation-on-windows-10.html>Solution Mandi - Cloud & Big Data !: Pig installation on Windows 10</a></p></li><li><p><a href=https://hadoop.apache.org/docs/r2.7.1/hadoop-project-dist/hadoop-common/ClusterSetup.html>Apache Hadoop 2.7.1</a></p></li><li><p><a href=https://stackoverflow.com/questions/42740053/not-able-to-run-dump-in-pig>Not able to run dump in pig - Stackoverflow</a></p></li><li><p><a href=https://www.wikitechy.com/tutorials/apache-pig/apache-pig-running-scripts>pig tutorial - apache pig tutorial - Apache Pig - Running Scripts - pig latin - apache pig - pig hadoop</a></p></li></ol></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=next href=http://localhost:1313/posts/minecraft-server/><span class=title>Next »</span><br><span>How to host a Minecraft server</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=http://localhost:1313/>likweitan</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>